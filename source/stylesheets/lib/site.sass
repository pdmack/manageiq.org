$bg-header-color: mix(#d2dfef, white, 60)

body
  border-top: 10px solid darken($bg-header-color, 15)
  box-sizing: border-box
  color: #333
  font-size: 11.5pt //1.75em
  text-rendering: optimizeLegibility
  -moz-text-rendering: optimizeLegibility
  -webkit-text-rendering: optimizeLegibility
  -blink-text-rendering: optimizeLegibility

h1, h2, h3, h4, h5, h6
  font-weight: 500
  clear: both

img
  max-width: 100%
  height: auto

.masthead,
.content > section > .row,
footer .row
  max-width: 80em
  margin: auto

  .row
    max-width: auto

.masthead
  /* Accommodate the header-page-only photograph
  position: absolute
  top: 0
  left: 0
  right: 0

  @media print
    nav
      display: none


body:not(.header-page)

  @media screen
    #page-wrap
      padding-top: 7em

  #content
    max-width: 70em

  @media screen and (max-width: 1023px)
    #page-wrap
      padding-top: 12em


body:not(.front-page)

  .logo
    //max-width: 342px
    //margin: 32px

  #content
    padding-bottom: 10rem

    h2, h3, h4, h5, h6
      padding: 1em 0 0.25em
      margin-top: 0

    h2
      font-size: 250%

    h3
      font-size: 175%

    h4
      font-size: 150%

    h5
      font-size: 125%

    h6
      font-size: 110%


pre, code
  font-size: inherit
  white-space: pre


.masthead
  @extend .row
  z-index: 100
  margin: 0 auto
  text-align: center

  .hgroup
    @extend .col-lg-3

  #access
    @extend .col-lg-9

  h1
    float: none

  .logo
    max-width: 100%
    height: auto
    margin: 0 32px

    &.is-svg
      /* The SVG is viewboxed, so we should set the size
      width: 200px

      @media screen and (max-width:1023px)
        width: 300px
        margin: 20px 0 0

  nav
    // See _bootstrap-custom.sass for bootstrap-related changes
    // (padding, color, etc.)
    font-family: $headings-font-family
    font-size: 18pt
    font-weight: 400
    text-transform: lowercase

    a
      white-space: nowrap

  @media screen and (max-width: 1199px)
    h1 > a
      padding-right: 0

    nav
      padding-left: 0
      padding-right: 0

  @media screen and (max-width: 799px)
    nav
      //font-size: 18pt

  @media screen and (min-width: 1024px)
    .hgroup
      float: left

    h1 > a
      display: block
      float: left

    nav
      float: right
      width: auto

      li
        $nav-active-border: 10px
        $nav-bar-color: black


        &.active
          border-top: $nav-active-border solid rgba($nav-bar-color, 0.25)

          a
            position: relative
            top: -$nav-active-border

        &:not(.active)

          &:hover
            border-top: $nav-active-border solid rgba($nav-bar-color, 0.1)

            a
              position: relative
              top: -$nav-active-border

  @media screen and (max-width: 1023px)
    .hgroup
      float: none

    h1 > a
      margin: 0 auto
      text-align: center
      display: block

    @media (min-width: 640px)

      #access
        padding: 0

      nav
        float: none
        margin: 0 auto
        clear: both
        width: 100%
        display: table

        li
          display: table-cell
          float: none
          width: 5%
          text-align: center

          a
            width: 100%
            display: block

    @media (max-width: 639px)

      nav
        float: none
        text-align: center

        ul, li
          display: inline
          float: none
          padding: 0

        a
          display: inline-block
          padding-top: 0.5ex
          padding-bottom: 0.5ex


@import compass/css3/images

.page-header
  @include background(linear-gradient(top, $bg-header-color 85%, darken($bg-header-color, 4)))
  background-size: cover
  border-bottom: 1px solid rgba(0,0,0,0.25)
  margin: 0 -15px
  padding: 4em 0 1em
  text-align: center

  h2, h3
    color: black

  h2
    font-size: 42pt !important
    margin: 0 auto

    &.with-type
      font-size: 28pt !important

      .product-name
        font-weight: 900
        display: block
        font-size: 46pt

  h3
    margin-top: 0.75ex
    font-weight: normal
    font-size: 26pt
    letter-spacing: -0.01ex

  h2 + p
    padding-top: 1em

  p
    font-size: 16pt
    max-width: 84rem
    margin: 0 auto
    text-align: left

  @media screen and (max-width: 1023px)

    .row
      position: relative
      padding-top: 5em !important

    h2
      font-size: 2.5em !important

    h3
      font-size: 1.6em

  @media (max-width: 639px)
    .row
      padding-top: 6em !important


body.front-page

  .page-header
    background: $bg-header-color url(/images/sparkler.jpg) 42% 55%
    background-size: cover
    //padding: 11em 0 5em
    padding: 10em 0 2em
    text-shadow: 0 0 15px white

    h2
      padding: 0

.front-page .content > section:not(.page-header)

  // Add borders to the top of the sections (which are not the header)
  .row
    border-top: 1px solid #ddd

    .row
      border: none


body.download-page

  @at-root .page-tip
    //@extend .alert
    //@extend .alert-warning
    @extend .hidden-print

    border-bottom: 1px solid #e0ca85
    background: #fef6dc
    color: rgba(black, 0.5)
    padding: 2ex 0

    .row
      padding-top: 0 !important
      padding-bottom: 0 !important

    strong
      display: block

  .download-options
    margin: 0 auto

  .download-option
    float: left
    min-width: 50%

    a
      margin-left: 6ex

  .download-selection-primary

    .intro
      font-size: 1.8rem
      max-width: 84rem
      margin: 0 auto

    .download-options
      padding-top: 1.5rem
      max-width: 84rem

    .download-option

      @media screen and (max-width: 40rem)
        width: 100%

      a
        font-family: $headings-font-family
        font-size: 2.125rem
        padding: 1ex 0
        display: block

  .download-selection-secondary

    em
      font-style: normal
      white-space: nowrap

    $download-doc-switcher-text: 45rem

    .side-left
      width: $download-doc-switcher-text
      width: 50%
      float: left

    .side-right
      float: right
      width: calc(100% - $download-doc-switcher-text)
      width: 50%
      overflow: hidden

    .download-option

      a
        padding: 0
        font: inherit
        font-weight: normal
        color: #e39549
        margin-left: 3ex

        &:before
          font-size: 1.75ex
          vertical-align: baseline
          padding: 0
          margin: 0


.content > section
  margin: 0 -15px

  .row
    padding: 3em

    .row
      padding: none

  @media screen and (max-width: 799px)
    .row
      padding: 5% 1ex


.front-page .content > section

  &.overview,
  &.get-started,
  &.next-steps
    .row
      border: none

  &.overview
    background: #f8f8f8

  &.overview-basic

    .row:first-child
      border-top: none

      h2
        font-size: 275%

      h2,
      h2+p
        text-align: center

      p+p,
      ul+p
        margin-top: 2em

    ul
      overflow: hidden
      //@extend .row

      li
        @extend .col-md-6
        padding: 1.25ex 1.5em 1.5ex
        list-style: none
        position: relative
        //font-size: 110%
        color: #888

        &:before
          @extend .fa
          //@extend .fa-arrow-right
          //@extend .fa-caret-right
          //@extend .fa-angle-double-right
          //@extend .fa-angle-right
          //@extend .fa-thumbs-o-up
          //@extend .fa-hand-o-right
          //@extend .fa-star
          //@extend .fa-check-square-o
          @extend .fa-check-square-o
          position: absolute
          left: -10px
          top: 1.1ex
          font-size: 22px
          //opacity: 0.4
          //color: mix(yellow, orange, 60)
          color: mix(green, #aaa, 30)

  &.get-started
    $content-padding: 24pt
    border-top: 1px solid #bdc0c6

    .choices
      ul, li
        list-style: none
        margin: 0

      li
        @extend .col-sm-6
        font-size: 140%

        a
          display: block
          padding: 0 1ex 0.5ex 0

      @media screen and (max-width: 991px)
        &
          padding-top: 1em

        li a
          padding-left: 0

    .download-button
      font-size: inherit
      color: rgba(white, 0.8)
      padding:
        left: 3ex
        right: 3ex
      border-radius: 1ex

  &.next-steps
    background: #2e3436
    border-top: 1px solid #202526


  // Fonts for inverted sections
  &.next-steps
    color: rgba(white, 0.6)

    h2
      color: rgba(white, 0.8)

    a
      color: white

      &.hover
        text-decoration: underline


.last-modified
  display: none


.overview
  $overview-header-main: 3.25rem
  $overview-header-sub: 2rem
  $icon-offset-v: $overview-header-sub + ($overview-header-main - $overview-header-sub) / 2
  $icon-size: 22px
  $icon-background-size: 48px

  .intro

    h2
      margin-bottom: 1rem
      padding: 0
      font-size: $overview-header-main
      padding: 0

  .features

    h2
      color: #999
      font-size: 140%
      font-size: $overview-header-sub
      font-weight: 500
      padding-top: $overview-header-main - $overview-header-sub

  .feature-item
    position: relative
    padding-left: $icon-background-size
    background: url(/images/q-glyph.svg) no-repeat 0.3rem $icon-offset-v

  .icon
    @extend .fa
    position: absolute
    top: calc(#{$icon-offset-v} + #{($icon-background-size - $icon-size) / 4})
    left: 0.12rem
    font-size: $icon-size
    text-align: center
    width: 38px
    color: rgba(white, 0.95)

    /* Note: Some micro-adjustments are needed as we're working with a
       3rd-party icon font (font-awesome)

    &.open-source
      @extend .fa-eye
      margin-top: -0.5px // Micro-adjustment

    &.hybrid-infra
      @extend .fa-adjust

    &.virtual-lab
      @extend .fa-magic
      margin-top: 1px // Micro-adjustment

    &.private-cloud
      @extend .fa-cloud


section.communication
  $communication-icon-size: 5rem
  $communication-icon-width: 8rem
  $communication-approx-header-height: 2.5rem

  h2
    line-height: $communication-approx-header-height

  .talk-back,
  .ask-questions
    padding-left: $communication-icon-width
    position: relative

    &:before
      @extend .fa
      font-size: $communication-icon-size
      position: absolute
      top: ($communication-icon-size - $communication-approx-header-height) / 2
      left: 0
      width: $communication-icon-width
      text-align: center
      opacity: 0.25

  .talk-back
    &:before
      @extend .fa-comments
      @extend .fa-flip-horizontal

  .ask-questions
    &:before
      @extend .fa-question-circle

#content.container
  max-width: 100%
  margin: 0 auto
  float: none
  width: 100%


.source-md,
.source-markdown

  #page-wrap
    overflow-x: hidden

  #page
    @extend .row

  #content
    @extend .col-md-12
    padding: 0 3rem

    @media screen and (min-width: 70em)
      // Ensure that padding is only needed when the column is not
      // restricted (it's used when it's needed to add a gutter)
      padding: 0


.download-icon
  @extend .fa
  @extend .fa-download


.download-link
  &:before
    @extend .download-icon
    margin-right: 0.75ex


.download-choice
  $download-icon-with-space: 1.25ex
  text-indent: -$download-icon-with-space

  &:before
    @extend .fa
    @extend .fa-arrow-right
    opacity: 0.35
    width: $download-icon-with-space


a .fa:first-child
  /* Add a space after all icons in links
  margin-right: 0.5ex

pre
  padding: 1ex 2ex


.installation-steps
  h3
    color: #777
    font-weight: 100

    strong
      color: #333
      font-weight: 600


.email-address
  width: 16em


.blog-area
  margin-bottom: 4em


.blog-posts

.blog-archive
  padding: 2.5rem 0 0 3rem

  h2
    @extend h3
    opacity: 0.7

  ol, li
    list-style: none
    padding: 0
    margin: 0

  li + li
    margin-top: 1rem


.subfooter-communication
  margin-top: 1em
  color: #bbb
  background-color: #555
  border: 0

  .row
    padding: 2em 3em

  .left-side,
  .right-side
    @extend .col-sm-6

  .left-side
    //@extend .col-sm-offset-1

  .right-side
    text-align: right


  .follow-text,
  .contact-us-text
    display: none

  .follow,
  .contact-us
    margin-right: 0.5ex

  a
    padding: 1ex
    color: #eee
    text-decoration: none
    white-space: nowrap
    transition: 400ms all

    &:hover
      color: #fff
      text-shadow: 0 0 9px rgba(white, 0.75)


    // icons
    &:before
      font-size: 24px
      margin: -3px 0 0 0
      font-size: 24px
      vertical-align: middle

  .follow

    .label
      display: none

  @at-root .fa-irc
    @extend .fa-slack


.partners-area
  overflow: hidden
  text-align: center

  h2
    font-size: 2.75rem
    opacity: 0.75

  .partners
    display: block
    overflow: hidden
    padding: 0

    &, & li
      list-style: none

    li
      display: inline
      margin: 0
      padding: 0

  .partner
    display: inline-block
    padding: 22px 22px 0
    vertical-align: middle
    transition: 600ms all

    &, & img
      @extend %responsive-image

    &:hover
      transition: 400ms all

    &:not(:hover)
      @extend %grayscale
      opacity: 0.4
      transition: 1s all


.more-link
  &.view-article
    display: none


#blog-comments
  display: none

q
  &:before
    content: "“"

  &:after
    content: "”"


#footer
  background-color: black
  color: rgba(white, 0.8)
  padding: 1.5em

  a
    color: white

  section.footer-area
    text-align: center

  .copyright,
  .edit-this-page,
  .hosting-provider
    //@extend .col-md-4
    font-size: 13px
    display: inline
    padding: 0 3em

  .copyright
    //@extend .col-md-offset-2

  .legal
    padding-left: 1ex

  .edit-this-page
    .icon
      font-size: 16px
      vertical-align: middle
      margin: 0 0.75ex 2px 0
      opacity: 0.8
      transition: 300ms all

    a:hover
      .icon
        opacity: 1

  .hosting-provider
    //text-align: right
    //float: right

    a
      vertical-align: middle
      display: inline
      padding: 0 0 6px 0.5ex

    img
      width: 100px
      position: relative
      top: -2px

#discourse-comments
  margin: 2em 0 4em

#export
  margin-top: 5rem
  // Undo #content bottom padding
  margin-bottom: -10rem

  .row
    border-top: 1px solid #999
    opacity: 0.6
    padding-top: 0
    margin-top: 3em

  h2
    font-size: 0.9em !important

  p
    font-size: 0.7em

.meet-the-team

  @media screen and (min-width: 600px) and (max-width: 1023px)
    .person
      width: 48%

      &:nth-child(odd)
        clear: both

  @media screen and (min-width: 1024px)
    .person
      width: 31%

      &:nth-child(3n+4)
        clear: both

  .team-list
    margin-top: 6rem

  .person
    box-sizing: border-box
    border: 0 solid transparent
    //border-width: 9px 0 0
    //border-width: 3px 9px 0 0
    border-width: 9px 0 0 0
    float: left
    margin-left: 1%
    margin-right: 1%
    margin-bottom: 3rem
    padding: 0 2rem 2rem

  h3
    margin-top: -1rem

  a
    padding: 2ex

    .icon
      font-size: 2.5rem
      margin: 0 0.5ex 0.125rem 0
      vertical-align: middle

  .github,
  .twitter,
  .tweet
    .label
      display: none

  ul, li
    list-style: none
    padding: 0
    margin: 0
    display: inline
    white-space: nowrap

  li
    line-height: 2.5

  .freenode
    display: block

    a
      padding-right: 0

.avatar-letter
  color: rgba(black, 0.3)
  color: white
  vertical-align: middle
  text-align: center
  font-weight: bold
  padding: 1ex
  float: left
  margin: 0 2ex 0 0


.avatar-letter,
.avatar img
  width: 64px
  height: 64px
  border-radius: 50%
  display: none

.fa-freenode
  @extend .fa-comments-o

.alert
  .icon, .fa
    font-size: 24px
    vertical-align: middle
    padding: 0 0.5rem 0 0

.toc-wrap
  column-gap: 7ex
  -moz-column-gap: 7ex

  @media screen and (min-width: 641px)
    column-count: 2
    -moz-column-count: 2

  @media screen and (min-width: 1025px)
    column-count: 3
    -moz-column-count: 3

  li
    color: #999

    + li
      margin-top: 0.5ex

.notice-note
  @extend .alert
  @extend .alert-success

.notice-important
  @extend .alert
  @extend .alert-warning

.notice-warning
  @extend .alert
  @extend .alert-danger

.toc
  &.level-2
    li li li
      display: none
  &.level-3
    li li li li
      display: none
  &.level-4
    li li li li li
      display: none
  &.level-5
    li li li li li li
      display: none


.video
  border: 1px solid #333
  border-radius: 1px
  background-color: #999

.video-responsive
  // Size of the video in units (not percentage, sadly)
  $video-size: 560px //45rem
  // Magic number to divide the width by to generate the proper ratio
  $video-aspect: 1.8
  // Space needed for text on the side, relative to the video
  // (That is, the width of the page should be THIS * VIDEO WIDTH)
  $video-textspace: 1.75

  max-width: 100%
  width: $video-size
  height: ceil($video-size / $video-aspect)

  /* Scale based on viewport width if there's not enough space
     for text on the side
  @media screen and (max-width: ($video-size * $video-textspace) - 1)
    width: calc(100vw)
    height: calc(100vw / #{$video-aspect})
    margin-bottom: 1rem

  // Rules to extend responsiveness for right-side videos
  @at-root .video-side-right
    @extend .video-responsive

    /* Only float when there's enough space for the text on the left
    @media screen and (min-width: $video-size * $video-textspace)
      float: right
      margin-left: 1rem

  // Rules to extend responsiveness for left-side videos
  @at-root .video-side-left
    @extend .video-responsive

    @media screen and (min-width: $video-size * $video-textspace)
      float: left
      margin-right: 1rem


=keyframes($name)
  @-webkit-keyframes #{$name}
    @content
  @-moz-keyframes #{$name}
    @content
  @-ms-keyframes #{$name}
    @content
  @keyframes #{$name}
    @content

+keyframes(fade-from-yellow)
  0%
    background: #ff9

  100%
    background: transparent

\:target
  +animation(fade-from-yellow 5s ease-out)


.fixme
  color: #c00
  background-color: #fee
  position: relative
  border: 1px solid rgba(#c00,0.25)
  border-radius: 2px
  padding-bottom: 2ex

  @at-root p.fixme
    padding: 1ex 2ex

  &:before
    pointer-events: none
    content: "FIXME"
    font-size: 8rem
    opacity: 0.125
    transform: rotate(350deg)
    -moz-transform: rotate(350deg)
    -webkit-transform: rotate(350deg)
    position: absolute
    left: 0
    right: 0
    top: calc(50% - 5rem)
    text-align: center

ol.steps
  margin-bottom: 6rem

  li
    margin-top: 3rem

    &:first-child

  li li:not(type)
    list-style-type: lower-alpha

  li li li:not(type)
    list-style-type: lower-roman


dl
  dt
    margin-top: 2rem
    font-family: $headings-font-family
    font-size: 1.75rem

  dd + dd
    margin-top: 1rem


blockquote
  font: inherit
  opacity: 0.8


.two-columns

  @media screen and (min-width: 50rem)
    &
      -moz-columns: 2
      columns: 2
      -moz-column-gap: 6ex
      column-gap: 6ex


      /* A hack to be sure items stay in columns
      li a
        display: inline-block
        vertical-align: top


.community-actions
  ul, li
    margin: 0
    padding: 0

  > section > ul
    margin-left: 2ex

.next-steps
  hr
    border-top: 1px dashed #ccc

ul.guides
  list-style: none
  padding-left: 1ex

a.pdf
  &:before
    @extend .fa
    @extend .fa-file-pdf-o
    color: #c00
    margin-right: 1ex

  &:after
    content: " PDF"
    opacity: 0.5
    font-size: 8px
    vertical-align: top


/* Aliased social sites to work-around ad-block's aggressive matching
a
  &.ext-t:before
    @extend .fa
    @extend .fa-twitter

  &.ext-yt:before
    @extend .fa
    @extend .fa-youtube

  &.ext-f:before
    @extend .fa
    @extend .fa-facebook

  &.ext-gh:before
    @extend .fa
    @extend .fa-github

/* Adblock is aggressive about blocking all things twitter...
   so we're adding an alias here
.fa-tweet
  @extend .fa-twitter
